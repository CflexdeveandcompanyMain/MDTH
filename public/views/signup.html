<!DOCTYPE html>
<html lang="en">
<head>
    <!-- SEO Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Sign up for MDTH's affordable tech education platform. Access industry-aligned courses in programming, data science, AI, and more to thrive in the digital age.">
    <meta name="keywords" content="tech education, online courses, programming, data science, AI, web development, sign up, MDTH">
    <meta name="author" content="MDTH">
    <meta property="og:title" content="Sign Up | MDTH - Affordable Tech Education">
    <meta property="og:description" content="Join MDTH to access affordable, industry-aligned tech education courses that prepare you for the digital workforce.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.mdth.com/signup">
    <meta property="og:image" content="https://www.mdth.com/images/mdth-social-share.jpg">
    <meta name="robots" content="index, follow">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://www.mdth.com/signup">
    
    <!-- Favicon -->
    <link rel="icon" href="images/MDTH LOGO.jpg" type="image/x-icon">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    <title>Sign Up | MDTH - Affordable Tech Education</title>
    
    <!-- Preload Resources - Fixed with proper as attribute -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap"></noscript>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <!-- Inline critical CSS to prevent preload warning -->
    <style>
        /* Critical CSS for initial page rendering */
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3a0ca3;
            --accent-color: #7209b7;
            --text-color: #333;
            --light-text: #666;
            --background-color: #f8f9fa;
            --card-bg: #ffffff;
            --border-color: #e0e0e0;
            --error-color: #e63946;
            --success-color: #2a9d8f;
            --warning-color: #f4a261;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --text-color: #f8f9fa;
            --light-text: #adb5bd;
            --background-color: #121212;
            --card-bg: #1e1e1e;
            --border-color: #2d2d2d;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: var(--transition);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 5%;
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo img {
            height: 40px;
        }

        .theme-toggle {
            cursor: pointer;
            margin-right: 1rem;
            font-size: 1.2rem;
            color: var(--text-color);
        }

        .auth-buttons .btn {
            padding: 0.5rem 1.5rem;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }

        .btn-login {
            background-color: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
        }

        .btn-login:hover {
            background-color: var(--primary-color);
            color: white;
        }

        .signup-container {
            display: flex;
            min-height: calc(100vh - 72px);
            position: relative;
            overflow: hidden;
        }

        /* More critical CSS would go here... */
    </style>
    
    <!-- Non-critical CSS loaded normally -->
    <link rel="stylesheet" href="css/styles.css" media="print" onload="this.media='all'">
    
    <!-- Schema Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "Sign Up | MDTH",
      "description": "Sign up page for MDTH's tech education platform",
      "url": "https://www.mdth.com/signup",
      "breadcrumb": {
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://www.mdth.com"
        },{
          "@type": "ListItem",
          "position": 2,
          "name": "Sign Up"
        }]
      }
    }
    </script>
 </head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="logo">
            <a href="index.html">
                <img src="images/MDTH_LOGO-removebg-preview.png" alt="MDTH Logo">
            </a>
        </div>
        
        <div style="display: flex; align-items: center;">
            <div class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon theme-icon" id="themeIcon"></i>
            </div>
        
        </div>
    </nav>

    <!-- Signup Section -->
    <section class="signup-container">
        <!-- Decorative Circles -->
        <div class="decorative-circle circle-1"></div>
        <div class="decorative-circle circle-2"></div>
        <div class="decorative-circle circle-3"></div>
        
        <!-- Creative Illustration -->
        <div class="signup-illustration">
            <div class="illustration-container">
                <div class="floating-element element-1">
                    <img src="https://plus.unsplash.com/premium_photo-1689700526675-883c3578e7b9?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDF8fHxlbnwwfHx8fHw%3D" alt="Students collaborating">
                </div>
                <div class="floating-element element-2">
                    <img src="https://images.unsplash.com/photo-1521791136064-7986c2920216?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Coding on laptop">
                </div>
                <div class="floating-element element-3">
                    <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Data analysis">
                </div>
                <div class="floating-element element-4">
                    <img src="https://images.unsplash.com/photo-1528901166007-3784c7dd3653?q=80&w=1170&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Online learning">
                </div>
            </div>
            
            <div class="illustration-text">
                <h2>Transform Your Future with Tech</h2>
                <p>Join our community of learners and gain access to industry-relevant courses that will propel your career forward in the digital age.</p>
            </div>
        </div>
        
        <!-- Signup Form -->
        <div class="signup-form-container">
            <div class="signup-header">
                <h1>Join MDTH Today</h1>
                <p>Start your journey in tech with our industry-aligned courses</p>
            </div>
            
            <form id="signupForm" class="signup-form">
                <div class="form-group">
                    <label for="fullname">Full Name</label>
                    <input type="text" id="fullname" name="fullname" placeholder="Enter your full name" required>
                </div>
                
                <!-- Added username field to match server expectations -->
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" placeholder="Choose a username" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email" required>
                </div>
                
                <div class="form-group password-field">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="Create a password" required minlength="8">
                    <i class="fas fa-eye password-toggle" id="togglePassword"></i>
                    <div class="password-strength">
                        <div class="strength-meter" id="strengthMeter"></div>
                    </div>
                </div>
                
                <div class="form-group password-field">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" required>
                    <i class="fas fa-eye password-toggle" id="toggleConfirmPassword"></i>
                </div>
                
                <div class="terms-check">
                    <input type="checkbox" id="terms" name="terms" required>
                    <label for="terms">I agree to the <a href="terms.html">Terms of Service</a> and <a href="terms.html">Privacy Policy</a></label>
                </div>
                
                <button type="submit" class="btn-submit">Create Account</button>
                
                <div class="login-link">
                    Already have an account? <a href="/login">Log in here</a>
                </div>
                
                <div class="social-login">
                    <p>Or sign up with</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon" aria-label="Sign up with Google"><i class="fab fa-google"></i></a>
                        <a href="#" class="social-icon" aria-label="Sign up with Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon" aria-label="Sign up with LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="modal-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2>Account Created Successfully!</h2>
            <p>Welcome to MDTH. We've sent a confirmation email to your address. Please verify to get started with your learning journey.</p>
            <button class="modal-btn" id="modalCloseBtn">Continue to Dashboard</button>
        </div>
    </div>

    <script>
      // Theme Toggle Functionality
      const themeToggle = document.getElementById('themeToggle');
      const themeIcon = document.getElementById('themeIcon');
      const body = document.body;

      // Check for saved theme preference or use preferred color scheme
      const savedTheme = localStorage.getItem('theme') || 
                       (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

      // Apply the saved theme
      if (savedTheme === 'dark') {
          body.setAttribute('data-theme', 'dark');
          themeIcon.classList.replace('fa-moon', 'fa-sun');
      }

      // Toggle theme on button click
      themeToggle.addEventListener('click', () => {
          if (body.getAttribute('data-theme') === 'dark') {
              body.setAttribute('data-theme', 'light');
              themeIcon.classList.replace('fa-sun', 'fa-moon');
              localStorage.setItem('theme', 'light');
          } else {
              body.setAttribute('data-theme', 'dark');
              themeIcon.classList.replace('fa-moon', 'fa-sun');
              localStorage.setItem('theme', 'dark');
          }
      });

      // Password Toggle Functionality
      const togglePassword = document.getElementById('togglePassword');
      const password = document.getElementById('password');
      const toggleConfirmPassword = document.getElementById('toggleConfirmPassword');
      const confirmPassword = document.getElementById('confirmPassword');

      if (togglePassword && password) {
          togglePassword.addEventListener('click', function() {
              const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
              password.setAttribute('type', type);
              this.classList.toggle('fa-eye-slash');
          });
      }

      if (toggleConfirmPassword && confirmPassword) {
          toggleConfirmPassword.addEventListener('click', function() {
              const type = confirmPassword.getAttribute('type') === 'password' ? 'text' : 'password';
              confirmPassword.setAttribute('type', type);
              this.classList.toggle('fa-eye-slash');
          });
      }

      // Password Strength Indicator
      if (password) {
          password.addEventListener('input', function() {
              const strengthMeter = document.getElementById('strengthMeter');
              if (!strengthMeter) return;
              
              const passwordValue = this.value;
              let strength = 0;
              
              // Check for length
              if (passwordValue.length >= 8) strength += 1;
              if (passwordValue.length >= 12) strength += 1;
              
              // Check for uppercase letters
              if (/[A-Z]/.test(passwordValue)) strength += 1;
              
              // Check for numbers
              if (/[0-9]/.test(passwordValue)) strength += 1;
              
              // Check for special characters
              if (/[^A-Za-z0-9]/.test(passwordValue)) strength += 1;
              
              // Update strength meter
              const width = (strength / 5) * 100;
              strengthMeter.style.width = `${width}%`;
              
              // Update color based on strength
              if (strength <= 1) {
                  strengthMeter.style.backgroundColor = 'var(--error-color)';
              } else if (strength <= 3) {
                  strengthMeter.style.backgroundColor = 'var(--warning-color)';
              } else {
                  strengthMeter.style.backgroundColor = 'var(--success-color)';
              }
          });
      }

      // Backend Integration - API Configuration
      const API_BASE_URL = 'https://mdth.onrender.com/api';

      // Authentication Manager Class
      class AuthManager {
          constructor() {
              this.token = localStorage.getItem('authToken');
              this.user = JSON.parse(localStorage.getItem('user') || 'null');
          }
          
          async register(userData) {
              try {
                  // Ensure all required fields are present
                  if (!userData.username || !userData.email || !userData.password) {
                      throw new Error('Username, email, and password are required');
                  }
                  
                  const response = await fetch(`${API_BASE_URL}/register`, {
                      method: 'POST',
                      headers: {
                          'Content-Type': 'application/json',
                      },
                      body: JSON.stringify(userData)
                  });
                  
                  const data = await response.json();
                  
                  if (!response.ok) {
                      throw new Error(data.error || data.message || 'Registration failed');
                  }
                  
                  // Store token and user data
                  this.token = data.token;
                  this.user = data.user;
                  localStorage.setItem('authToken', this.token);
                  localStorage.setItem('user', JSON.stringify(this.user));
                  
                  return data;
              } catch (error) {
                  console.error('Registration API error:', error);
                  throw error;
              }
          }
          
          logout() {
              this.token = null;
              this.user = null;
              localStorage.removeItem('authToken');
              localStorage.removeItem('user');
          }
          
          isAuthenticated() {
              return !!this.token;
          }
      }

      // Initialize auth manager
      const auth = new AuthManager();

      // Check if already logged in
      if (auth.isAuthenticated()) {
          window.location.href = '/dashboard';
      }

      // Show message function
      function showMessage(message, type = 'info') {
          // Create a toast notification
          const toast = document.createElement('div');
          toast.className = `toast ${type}`;
          toast.textContent = message;
          
          // Add styles if not already added
          if (!document.querySelector('#toast-styles')) {
              const style = document.createElement('style');
              style.id = 'toast-styles';
              style.textContent = `
                  .toast {
                      position: fixed;
                      top: 20px;
                      right: 20px;
                      padding: 12px 20px;
                      border-radius: 4px;
                      color: white;
                      z-index: 1000;
                      opacity: 0;
                      transform: translateY(-20px);
                      transition: opacity 0.3s, transform 0.3s;
                  }
                  .toast.error { background-color: #f44336; }
                  .toast.success { background-color: #4CAF50; }
                  .toast.info { background-color: #2196F3; }
                  .toast.show {
                      opacity: 1;
                      transform: translateY(0);
                  }
              `;
              document.head.appendChild(style);
          }
          
          document.body.appendChild(toast);
          
          // Show toast
          setTimeout(() => toast.classList.add('show'), 10);
          
          // Remove toast after 3 seconds
          setTimeout(() => {
              toast.classList.remove('show');
              setTimeout(() => toast.remove(), 300);
          }, 3000);
      }

      // Form Validation and Submission with Backend Integration
      const signupForm = document.getElementById('signupForm');
      const successModal = document.getElementById('successModal');
      const modalCloseBtn = document.getElementById('modalCloseBtn');

      if (signupForm) {
          signupForm.addEventListener('submit', async function(e) {
              e.preventDefault();
              
              // Get form data
              const fullName = document.getElementById('fullname')?.value.trim();
              const username = document.getElementById('username')?.value.trim();
              const email = document.getElementById('email')?.value.trim();
              const passwordValue = password?.value;
              const confirmPasswordValue = confirmPassword?.value;
              const termsChecked = document.getElementById('terms')?.checked;
              
              // Client-side validation
              if (!fullName || !username || !email || !passwordValue) {
                  showMessage('Please fill in all required fields', 'error');
                  return;
              }
              
              // Email validation
              const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              if (!emailRegex.test(email)) {
                  showMessage('Please enter a valid email address', 'error');
                  return;
              }
              
              // Validate passwords match
              if (passwordValue !== confirmPasswordValue) {
                  showMessage('Passwords do not match!', 'error');
                  return;
              }
              
              // Validate password strength
              if (passwordValue.length < 6) {
                  showMessage('Password must be at least 6 characters long!', 'error');
                  return;
              }
              
              // Validate terms checkbox
              if (!termsChecked) {
                  showMessage('You must agree to the terms and conditions', 'error');
                  return;
              }
              
              // Disable submit button and show loading state
              const submitBtn = signupForm.querySelector('button[type="submit"]');
              const originalBtnText = submitBtn.textContent;
              submitBtn.textContent = 'Creating Account...';
              submitBtn.disabled = true;
              
              try {
                  // Prepare user data for registration
                  const userData = {
                      fullName: fullName,
                      username: username,
                      email: email,
                      password: passwordValue
                  };
                  
                  // Call backend registration
                  const result = await auth.register(userData);
                  
                  // Show success message
                  showMessage('Account created successfully!', 'success');
                  
                  // Show success modal
                  if (successModal) {
                      successModal.classList.add('show');
                  }
                  
                  // Reset form
                  signupForm.reset();
                  
                  // Reset password strength meter
                  const strengthMeter = document.getElementById('strengthMeter');
                  if (strengthMeter) {
                      strengthMeter.style.width = '0%';
                  }
                  
                  console.log('User registered successfully:', result.user);
                  
              } catch (error) {
                  console.error('Registration error:', error);
                  showMessage(error.message || 'Registration failed. Please try again.', 'error');
              } finally {
                  // Re-enable submit button
                  submitBtn.textContent = originalBtnText;
                  submitBtn.disabled = false;
              }
          });
      }

      // Close modal
      if (modalCloseBtn && successModal) {
          modalCloseBtn.addEventListener('click', function() {
              successModal.classList.remove('show');
              // Redirect to dashboard since user is now logged in
              window.location.href = '/dashboard';
          });
      }

      // Input field animations
      const inputs = document.querySelectorAll('input');
      inputs.forEach(input => {
          input.addEventListener('focus', function() {
              this.parentElement.style.transform = 'translateY(-3px)';
          });
          
          input.addEventListener('blur', function() {
              this.parentElement.style.transform = 'translateY(0)';
          });
      });

      // Floating elements hover effect
      const floatingElements = document.querySelectorAll('.floating-element');
      floatingElements.forEach(element => {
          element.addEventListener('mouseenter', function() {
              this.style.transform = this.style.transform.includes('scale') ? 
                  this.style.transform : this.style.transform + ' scale(1.05)';
              this.style.zIndex = '10';
              this.style.boxShadow = '0 15px 35px rgba(0, 0, 0, 0.2)';
          });
          
          element.addEventListener('mouseleave', function() {
              this.style.transform = this.style.transform.replace(' scale(1.05)', '');
              this.style.zIndex = this.classList.contains('element-1') ? '3' : 
                                  this.classList.contains('element-2') ? '2' : 
                                  this.classList.contains('element-3') ? '1' : '4';
              this.style.boxShadow = '0 10px 25px rgba(0, 0, 0, 0.1)';
          });
      });

      // Real-time form validation
      function setupRealTimeValidation() {
          const emailInput = document.getElementById('email');
          
          if (emailInput) {
              emailInput.addEventListener('input', function() {
                  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                  if (this.value && !emailRegex.test(this.value)) {
                      this.setCustomValidity('Please enter a valid email address');
                  } else {
                      this.setCustomValidity('');
                  }
              });
          }
      }

      // Initialize real-time validation
      setupRealTimeValidation();

      // Add event listener for DOMContentLoaded to ensure everything loads properly
      document.addEventListener('DOMContentLoaded', function() {
          console.log('Signup page loaded successfully');
      });
    </script>
</body>
</html>